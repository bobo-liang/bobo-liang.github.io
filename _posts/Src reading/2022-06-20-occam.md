---
layout: post
title: 'Occam源码原理阅读'
date: 2022-06-20
author: Poley
cover: '../assets/img/mycat3.jpg'
tags: 源码阅读
---

Occam的用于点云的显著性可视化，其代码并不复杂。主要分为两个部分
## 点云采样
本方法是一个黑盒模型，因此需要对点云进行若干次的下采样，来衡量每个点的重要性。这里作者为了尽可能的模拟现实中的点云缺失情况并提高速度，将整个体素中的点同时保留或丢弃。但考虑到点云密度的不一致性，这里作者对于不同距离的点进行了距离平方正比的保留率，即远处的点被保留的几率更大。

同时，为了增大采样的随机性，这里作者进行了多种体素划分。注意到这里的体素仅仅用于决定下采样的mask，真正输入网络的点云（mask之前）和体素都是一样的。因此，本方法的第一步是对点云进行随机的旋转和平移变换，得到不同的体素网格（不同的点云体素划分），今儿产生对应的点云mask。用于输入网络

## 前向计算和相似度计算

上述不同的下采样点云都通过网络进行计算，并和未经过下采样的点云输出结果进行对比。本文给出若干score的计算得分，这些得分会在任意两个bounding box之间计算得到。即比如Base得到20个输出，下采样后的点云得到19个输出（Bounding box），则会得到一个20*19的相似度矩阵。这里直接取最大的相似度作为这次下采样中，对每个Base bounding box的相似度得分。这些得分将直接被赋予所有在这次下采样中被采样到的点。若点数是10000，则这步得到一个20*10000的矩阵。（最终输出的map也是这个尺寸）

Base bounding box在每一次下采样中的相似度得分将被累加，同时，每次下采样的mask也将被累加，用于记录每个点的采样次数（长度为10000的vector），用于归一化。最终，使用采样次数对整个累加的相似度矩阵的每一列进行归一化，得到最终的输出。

代码总体结构比较简单，运行速度也较快，可以作为以后对于点云目标检测模型的一种分析工具。
